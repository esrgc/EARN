@using ESRGC.DLLR.EARN.Domain.Model
@using PagedList;
@using PagedList.Mvc;
@model PagedList.PagedList<Partnership>
@{
    ViewBag.Title = "Partnerships";
    ViewBag.Header = "Partnerships";
}

@section header{
    <div class="container">
        <header class="page-header">
            <h3>@ViewBag.Header <i class="glyphicon glyphicon-link"></i></h3>
            @*<ul class="breadcrumb">
                <li><a href="@Url.Action("index", "Home")">Home</a></li>
                <li class="active">@ViewBag.Header</li>
            </ul>*@
        </header>
    </div>
}

@section scripts {
    <script type="text/javascript">
        var startup = function () {
            //$(document).on('mouseenter', '#partnershipList *[data-toggle=popover]', function () {
            //    $(this).popover('show');
            //});
        };
    </script>
}
@{
    var filters = ViewBag.filters as Dictionary<string, object> ?? new Dictionary<string, object>();
    var returnUrl = Url.Action("Index");
    ViewBag.returnUrl = returnUrl;
    var currentProfile = ViewBag.currentProfile as Profile;
}
<div class="container">
    <div class="row">
        <div class="col-sm-12">
            <div class="window-panel">
                <div class="window-panel-title">
                    <strong>Available Partnerships</strong>
                </div>

                <div class="window-panel-content">
                    @if (Model.Count() == 0) {
                        <p>There are currently no partnerships available.</p>
                    }
                    else {
                        if (Model.PageCount > 1) {
                        @Html.PagedListPager(
                            Model,
                            page => Url.AddSearchFilter("Index", filters, "page", page.ToString()),
                            PagedListRenderOptions.OnlyShowFivePagesAtATime
                        )}
                        <div class="" id="partnershipList">
                            <ul class="list-group">
                                @foreach (var p in Model) {
                                    <li class="list-group-item">
                                        @Html.Partial("partnershipWithActionPartial", p)
                                    </li>
                                }
                            </ul>
                        </div>
                                if (Model.PageCount > 1) {
                        @Html.PagedListPager(
                            Model,
                            page => Url.AddSearchFilter("Index", filters, "page", page.ToString()),
                            PagedListRenderOptions.OnlyShowFivePagesAtATime
                        )}
                    }
                </div>
            </div>
        </div>
    </div>
</div>
