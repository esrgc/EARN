@using ESRGC.DLLR.EARN.Domain.Model
@model Profile

@{
    ViewBag.Title = "View Profile";
    ViewBag.Header = "Profile";
}

@section header{
    <div class="container">
        <header class="page-header">
            <h3>@ViewBag.Header <i class="fa fa-briefcase"></i></h3>
            @*<ul class="breadcrumb">
                <li><a href="@Url.Action("index", "Home")">Home</a></li>
                <li class="active">@ViewBag.Header</li>
            </ul>*@
        </header>
    </div>
}

@{
    var returnUrl = ViewBag.returnUrl as string ?? Url.Action("Basic", "Search");
    ViewBag.returnUrl = Url.Action("ViewProfile", new { Model.ProfileID , returnUrl});
    var currentProfile = ViewBag.currentProfile as Profile ?? new Profile();
}

<div class="container">
    <!--Profile header-->
    <div class="row">
        <div class="col-sm-12">
            <div class="panel-action">
                <div class="pull-left panel-action-default">
                    <a href="@returnUrl"><i class="fa fa-long-arrow-left"></i>&nbsp;Back to previous</a>
                </div>
                @*@if (!(currentProfile.ProfileID == Model.ProfileID)) { 
                    <div class="pull-right panel-action-default">
                        @Html.Partial("profileActionPartial")
                    </div>
                }*@
                <div class="clear"></div>
            </div>
            <div class="placeholder-panel">
                <div class="post">
                    <ul class="list-inline list-unstyled link-fa-container" id="socialNetworkLinks">
                        <li><a target="_blank" href="http://@Model.Organization.FacebookLink" title="Facebook link"><i class="fa fa-lg fa-facebook"></i></a></li>
                        <li><a target="_blank" href="http://@Model.Organization.TwitterLink" title="Twitter link"><i class="fa fa-lg fa-twitter"></i></a></li>
                        <li><a target="_blank" href="http://@Model.Organization.LinkedInLink" title="LinkedIn link"><i class="fa fa-lg fa-linkedin"></i></a></li>
                    </ul>
                    <div class="inline-container profile-area">
                        @Html.Partial("profileImagePartial")
                        <div class="row profile-container">
                            <div class="col-sm-10">
                                <div class="">
                                    <h4>
                                        <span>@Model.Organization.Name</span>
                                        <br />
                                        <small>@Model.UserGroup.Name</small>
                                        @*-
                                        <small>@Model.Category.Name</small>*@
                                        <br />
                                        <small><a target="_blank" href="http://@Model.Organization.Website" title="Organization website">@Model.Organization.Website</a></small>
                                    </h4>
                                    <p>@Model.Organization.Description</p>
                                </div>

                            </div>
                        </div>

                    </div>
                    <div class="clear"></div>
                </div>
            </div>
        </div>
    </div>
    <hr />
    <!--Profile detail-->
    <div class="row">
        <div class="col-sm-4">
            <div>
                <div class="window-panel">
                    <div class="window-panel-title">
                        Searchable tags <i class="fa fa-tags"></i>
                    </div>
                    <div class="window-panel-content">
                        @Html.Partial("tagListLinkPartial", Model.getTagNames())
                    </div>
                </div>
            </div>
            <div>
                <div class="window-panel">
                    <div class="window-panel-title">
                        Contact <i class="fa fa-envelope"></i>
                    </div>
                    <div class="window-panel-content">
                        @Html.Partial("profileContactPartial")
                    </div>
                </div>
            </div>
        </div>
        <div class="col-sm-8 profile-tabs">
            <ul class="nav nav-tabs ">
                <li class="active"><a href="#tab1" data-toggle="tab">Summary</a></li>
                <li><a href="#tab2" data-toggle="tab">Partnerships&nbsp;<span class="badge">@Model.PartnershipDetails.Count()</span></a></li>
            </ul>
            <div class="tab-content">
                <div class="tab-pane active" id="tab1">
                    <div class="placeholder-pane">
                        <h4>About</h4>
                        @if (!string.IsNullOrEmpty(Model.About)) { 
                            <p>@Model.About</p>
                        }
                        else{
                            <p>...</p>
                        }
                    </div>
                </div>
                <div class="tab-pane" id="tab2">
                    <div class="placeholder-pane">
                        <h4>Available Partnerships</h4>
                        @if (Model.PartnershipDetails.Count() == 0) { 
                            <p>There's currently no partnership available.</p>
                        }
                        else {
                            @Html.Action("ListPartnerships", "Partnership", new { Model.ProfileID })
                        }
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
